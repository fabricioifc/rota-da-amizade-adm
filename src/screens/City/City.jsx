import { useParams } from "react-router-dom";
import "./City.css";
import { useEffect, useState } from "react";
import axios from "axios";
import Loading from "../../components/Loading/Loading";
import ImgCarousel from "../../components/ImgCarousel/ImgCarousel";
import CompContact from "../../components/CompContact/CompContact";

function City() {
    const townUrl = useParams();

    const [town, setTown] = useState([]);

    useEffect(() => {
        axios.get(`../Data/cities/${townUrl.url}.json`).then((res) => {
            console.log(res);
            setTown(res.data);
        });
    }, []);

    const calendarIcon = (
        <svg id="Layer_1" data-name="Layer 1" viewBox="0 0 122.88 122.89">
            <title>date</title>
            <path
                fill="#98b126"
                d="M81.61,4.73C81.61,2.12,84.19,0,87.38,0s5.77,2.12,5.77,4.73V25.45c0,2.61-2.58,4.73-5.77,4.73s-5.77-2.12-5.77-4.73V4.73ZM66.11,105.66c-.8,0-.8-10.1,0-10.1H81.9c.8,0,.8,10.1,0,10.1ZM15.85,68.94c-.8,0-.8-10.1,0-10.1H31.64c.8,0,.8,10.1,0,10.1Zm25.13,0c-.8,0-.8-10.1,0-10.1H56.77c.8,0,.8,10.1,0,10.1Zm25.13,0c-.8,0-.8-10.1,0-10.1H81.9c.8,0,.8,10.1,0,10.1Zm25.14-10.1H107c.8,0,.8,10.1,0,10.1H91.25c-.8,0-.8-10.1,0-10.1ZM15.85,87.3c-.8,0-.8-10.1,0-10.1H31.64c.8,0,.8,10.1,0,10.1ZM41,87.3c-.8,0-.8-10.1,0-10.1H56.77c.8,0,.8,10.1,0,10.1Zm25.13,0c-.8,0-.8-10.1,0-10.1H81.9c.8,0,.8,10.1,0,10.1Zm25.14,0c-.8,0-.8-10.1,0-10.1H107c.8,0,.8,10.1,0,10.1Zm-75.4,18.36c-.8,0-.8-10.1,0-10.1H31.64c.8,0,.8,10.1,0,10.1Zm25.13,0c-.8,0-.8-10.1,0-10.1H56.77c.8,0,.8,10.1,0,10.1ZM29.61,4.73C29.61,2.12,32.19,0,35.38,0s5.77,2.12,5.77,4.73V25.45c0,2.61-2.58,4.73-5.77,4.73s-5.77-2.12-5.77-4.73V4.73ZM6.4,43.47H116.47v-22a3,3,0,0,0-.86-2.07,2.92,2.92,0,0,0-2.07-.86H103a3.2,3.2,0,0,1,0-6.4h10.55a9.36,9.36,0,0,1,9.33,9.33v92.09a9.36,9.36,0,0,1-9.33,9.33H9.33A9.36,9.36,0,0,1,0,113.55V21.47a9.36,9.36,0,0,1,9.33-9.33H20.6a3.2,3.2,0,1,1,0,6.4H9.33a3,3,0,0,0-2.07.86,2.92,2.92,0,0,0-.86,2.07v22Zm110.08,6.41H6.4v63.67a3,3,0,0,0,.86,2.07,2.92,2.92,0,0,0,2.07.86H113.55a3,3,0,0,0,2.07-.86,2.92,2.92,0,0,0,.86-2.07V49.88ZM50.43,18.54a3.2,3.2,0,0,1,0-6.4H71.92a3.2,3.2,0,1,1,0,6.4Z"
            />
        </svg>
    );

    const peoplesIcon = (
        <svg
            version="1.1"
            id="Layer_1"
            x="0px"
            y="0px"
            viewBox="0 0 122.88 82.72"
        >
            <g>
                <path
                    fill="#98b126"
                    d="M85.96,9.48c4.5-0.31,9.34,0.41,12.33,2.16c3.41,1.99,5.42,5.48,5.42,11.01v4.84c0,2.17-0.08,2.23,0.71,3.37 c0.6,0.87,0.74,0.97,0.93,2.03c0.27,1.39,0.28,2.8,0.3,4.25c0.03,2.26-0.83,2.91-1.98,4.74l-4.89,7.79 c-1.52,2.43-2.9,3.91-2.3,6.99c1.34,6.83,20.91,10.68,26.38,13.11v12.94h-15.91c0-2.44,0.9-14.57-0.45-15.57 c-16.41-12.11-38.14-5.37-21.54-31.24c1.31-2.1,1.4-2.99,2.27-5.43C88.84,25.99,88.64,16.5,85.96,9.48L85.96,9.48L85.96,9.48z M36.92,9.48c-4.5-0.31-9.34,0.41-12.33,2.16c-3.41,1.99-5.42,5.48-5.42,11.01v4.84c0,2.17,0.08,2.23-0.71,3.37 c-0.6,0.87-0.73,0.97-0.93,2.03c-0.27,1.39-0.28,2.8-0.3,4.25c-0.03,2.26,0.83,2.91,1.98,4.74l4.89,7.79 c1.52,2.43,2.9,3.91,2.3,6.99C25.03,63.5,5.47,67.35,0,69.78v12.94h15.9c0-2.44-0.9-14.57,0.45-15.57 c16.41-12.11,38.14-5.37,21.54-31.24c-1.31-2.1-1.4-2.99-2.27-5.43C34.04,25.99,34.24,16.5,36.92,9.48L36.92,9.48L36.92,9.48z M20.05,82.72l0-12.89c6.17-2.74,30.31-8.8,31.82-16.51c0.68-3.47-0.89-5.15-2.6-7.89l-5.52-8.79c-1.29-2.07-2.27-2.8-2.23-5.35 c0.02-1.43,0.04-2.85,0.25-4.23c0.26-1.76,0.48-1.82,1.4-3.24c0.62-0.95,0.55-1.24,0.55-3.43v-5.46c0-6.31,2.32-10.25,6.24-12.49 c5.73-3.27,17.36-3.27,23.06,0.07c3.84,2.25,6.12,6.18,6.12,12.42v5.46c0,2.46-0.09,2.52,0.8,3.81c0.68,0.98,0.83,1.1,1.06,2.29 c0.3,1.56,0.32,3.17,0.34,4.8c0.04,2.55-0.93,3.29-2.23,5.35l-5.51,8.79c-1.71,2.74-3.28,4.42-2.59,7.89 c1.52,7.71,23.6,12.05,29.76,14.8v14.61L20.05,82.72L20.05,82.72L20.05,82.72z"
                />
            </g>
        </svg>
    );

    const speakBubbleIcon = (
        <svg version="1.1" id="Layer_1" viewBox="0 0 122.879 102.401">
            <g>
                <path
                    fill="#98b126"
                    d="M46.736,0H30.311H16.698C12.083,0,8.144,1.619,4.881,4.881C1.619,8.144,0,12.083,0,16.698v29.313 c0,4.639,1.619,8.579,4.881,11.841c3.262,3.238,7.202,4.882,11.817,4.882c4.301,0,8.603,0,12.904,0 c-0.942,3.673-2.15,7.178-3.624,10.463c-1.45,3.311-3.891,6.477-7.298,9.497c6.525-1.691,12.325-4.229,17.423-7.587 c5.099-3.335,9.497-7.468,13.17-12.373c3.691,0,7.384,0,11.075,0c4.615,0,8.554-1.644,11.816-4.882 c3.264-3.262,4.883-7.202,4.883-11.841V16.698c0-4.615-1.619-8.555-4.883-11.817C68.902,1.619,64.963,0,60.348,0H46.736L46.736,0z M122.879,33.663v29.313c0,2.667-0.475,5.159-1.432,7.479c-0.953,2.314-2.375,4.416-4.266,6.308 c-0.822,0.814-1.684,1.545-2.584,2.188c-0.928,0.66-1.873,1.221-2.84,1.681c-0.051,0.024-0.104,0.047-0.156,0.068 c-1.236,0.575-2.525,1.009-3.863,1.299c-1.389,0.302-2.824,0.453-4.311,0.453h-8.734h-0.018h-0.018h-0.018h-0.016h-0.467 c0.186,0.59,0.379,1.175,0.578,1.755c0.568,1.639,1.207,3.253,1.918,4.837l0.01,0.021h0.002c0.641,1.463,1.496,2.89,2.564,4.279 c1.102,1.434,2.447,2.854,4.033,4.261c1.135,1.004,1.24,2.737,0.238,3.871c-0.707,0.799-1.777,1.088-2.742,0.838l-0.002,0.001 c-3.406-0.884-6.625-1.987-9.654-3.309c-3.031-1.321-5.891-2.87-8.58-4.642l-0.006,0.008c-2.672-1.747-5.172-3.715-7.494-5.897 c-1.969-1.85-3.807-3.857-5.514-6.023h-0.928h-0.016h-0.02h-0.016h-0.018h-8.735c-1.818,0-3.56-0.227-5.223-0.676 c-1.665-0.45-3.251-1.134-4.756-2.048c-1.295-0.784-1.709-2.469-0.925-3.764c0.784-1.295,2.469-1.709,3.764-0.925 c1.031,0.626,2.144,1.102,3.337,1.424c1.186,0.32,2.454,0.482,3.803,0.482h8.735h0.018h0.016h0.02h0.016h2.271v0.011 c0.834,0,1.656,0.379,2.193,1.097c1.732,2.313,3.648,4.456,5.74,6.422c2.066,1.941,4.316,3.708,6.742,5.295l-0.006,0.008 l0.006,0.003c2.305,1.519,4.777,2.865,7.418,4.038c-0.5-0.846-0.938-1.699-1.314-2.561l0,0c-0.752-1.681-1.445-3.438-2.08-5.267 c-0.602-1.738-1.141-3.525-1.617-5.353c-0.105-0.294-0.164-0.61-0.164-0.94c0-1.521,1.232-2.753,2.752-2.753h4.102h0.016h0.018 h0.018h0.018h8.734c1.107,0,2.156-0.108,3.148-0.324c0.943-0.204,1.84-0.503,2.689-0.895c0.041-0.022,0.084-0.044,0.127-0.064 c0.717-0.342,1.393-0.737,2.021-1.186c0.656-0.469,1.289-1.004,1.895-1.606c1.371-1.37,2.391-2.87,3.063-4.501 c0.67-1.624,1.002-3.421,1.002-5.394V33.663c0-1.96-0.332-3.751-1.002-5.373c-0.672-1.628-1.691-3.127-3.063-4.498l0,0l-0.01-0.011 c-1.371-1.371-2.869-2.391-4.498-3.062c-1.621-0.669-3.412-1.002-5.373-1.002h-7.873h-5.738c-1.521,0-2.754-1.233-2.754-2.753 c0-1.521,1.232-2.753,2.754-2.753h5.738h7.873c2.656,0,5.143,0.476,7.459,1.432c2.307,0.952,4.406,2.37,6.295,4.256l0.004,0.005 l0.006,0.005l0.002,0.002c1.887,1.888,3.303,3.986,4.254,6.292C122.404,28.521,122.879,31.008,122.879,33.663L122.879,33.663z"
                />
            </g>
        </svg>
    );

    const flagIcon = (
        <svg
            version="1.1"
            id="Layer_1"
            viewBox="0 0 83.207 122.879"
            enableBackground="new 0 0 83.207 122.879"
        >
            <g>
                <path
                    fill="#98b126"
                    d="M0,2.458C0,1.1,1.101,0,2.458,0c1.357,0,2.458,1.1,2.458,2.458v4.276c17.879,4.529,27.991,1.129,37.34-2.015 C53.16,1.052,63.104-2.292,81.729,5.839c0.922,0.401,1.473,1.302,1.473,2.246h0.006V68.65c0,1.356-1.1,2.457-2.457,2.457 c-0.377,0-0.734-0.085-1.055-0.237c-15.799-7.177-26.041-3.969-36.816-0.593c-10.491,3.286-21.45,6.717-37.963,2.083v48.062 c0,1.357-1.101,2.457-2.458,2.457c-1.357,0-2.458-1.1-2.458-2.457V2.458L0,2.458z M4.916,11.775v55.468 c15.9,4.803,26.433,1.504,36.504-1.651c10.91-3.418,21.318-6.676,36.873-0.644V9.705C62.336,3.136,53.486,6.111,43.811,9.364 C34.011,12.66,23.427,16.218,4.916,11.775L4.916,11.775z"
                />
            </g>
        </svg>
    );

    return (
        <>
            {town.length === 0 ? (
                <Loading />
            ) : (
                <>
                    <section id="city">
                        <div className="container">
                            <h1>{town.name}</h1>
                            <div id="basicInfo">
                                <div>
                                    <div className="infoIconContainer">
                                        {calendarIcon}
                                    </div>
                                    <div>
                                        <p>Fundação</p>
                                        <p>{town.foundation}</p>
                                    </div>
                                </div>
                                <div>
                                    <div className="infoIconContainer">
                                        {peoplesIcon}
                                    </div>
                                    <div>
                                        <p>População</p>
                                        <p>{town.population}</p>
                                    </div>
                                </div>
                                <div>
                                    <div className="infoIconContainer">
                                        {speakBubbleIcon}
                                    </div>
                                    <div>
                                        <p>Gentílico</p>
                                        <p>{town.ethnic}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    {town.images.length !== 0 ? (
                        <section id="imagesCity">
                            <div className="container">
                                <ImgCarousel
                                    images={town.images}
                                    imageName={town.imageName}
                                    name={town.name}
                                ></ImgCarousel>
                            </div>
                        </section>
                    ) : (
                        ""
                    )}

                    <section id="history">
                        <div className="container">
                            <h2>Nossa história</h2>
                            {town.history.map((res, index) => {
                                return <p key={index}>{res.paragraph}</p>;
                            })}
                        </div>
                    </section>
                    <section id="cityLocation">
                        <div className="container" id="cityContainer">
                            <div id="flagIcon">{flagIcon}</div>
                            <div id="locationText">
                                <div>
                                    <p>
                                        Altitude :
                                        <b>{town.location.altitude} metros</b>
                                    </p>
                                </div>
                                <div>
                                    <p>
                                        Território :{" "}
                                        <b>
                                            {town.location.territory}km
                                            <sup>2</sup>
                                        </b>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div className="container" id="locationGeo">
                            <iframe
                                src={town.location.geoLocation}
                                width="600"
                                height="450"
                            ></iframe>
                            {/*                                 
                                <iframe
                                    src={town.location.geolocation}
                                    loading="lazy"
                                    referrerpolicy="no-referrer-when-downgrade"
                                ></iframe> */}
                        </div>
                    </section>
                    <section id="compContactContainer">
                        <div className="container" id="compContact">
                            <CompContact
                                whatsapp={town.contact.phone}
                                email={town.contact.email}
                                facebook={town.contact.socialMedias.facebook}
                                facebookUrl={
                                    town.contact.socialMedias.facebookUrl
                                }
                                instagram={town.contact.socialMedias.instagram}
                                instagramUrl={
                                    town.contact.socialMedias.instagramUrl
                                }
                            />
                        </div>
                    </section>
                </>
            )}
        </>
    );
}

export default City;
